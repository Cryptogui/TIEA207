syntax = "proto3";

package testi;

message Chatmessage {
  int32 senderID = 1;
  string msg = 2;
}

message Location {
  int32 senderID = 1;
  double latitude = 2;
  double longitude = 3;
}

message SendLocation {
  double latitude = 1;
  double longitude = 2;
}

message SendLoginInfo {
  string key = 1;
}

message Query {
  uint64 cmd = 1;
  string args = 2;
}

message FromServer {
  repeated Chatmessage chatmsg = 1;
  repeated Location locations = 2;
  repeated DrawShape shapes = 3;
}

message DrawPoint {
  double latitude = 1;
  double longitude = 2;
}

message DrawShape {
  repeated DrawPoint points = 1;
  int32 type = 2;
  int32 senderID = 3;
}

message ToServer {
  Query query = 1;
  SendLoginInfo logininfo = 2;
  string chatmsg = 3;
  SendLocation location = 4;
  DrawShape shape = 5;
}

message JoinRoom {
  string roomname = 1;
  string password = 2;
  string username = 3;
  bool createroom = 4;
}

message JoinRoomAnswers {
  bool joinsuccesful = 1;
  bool wrongpassword = 2;
  bool roomdoesntexist = 3;
}

